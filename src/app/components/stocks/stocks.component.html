<div class="outer">
  <div class="container">
    <div class="row">
      <div class="" [class.blur]="showForm">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <h3 class="pt-3 font-weight-bold" style="cursor: default;" (click)="navigateToDashboard()">Market Status:
            <span [ngStyle]="{ color: marketStatus === 'Open' ? 'green' : 'red' }">
              {{ marketStatus }}
            </span>
          </h3>
          <div>
            <button class="btn btn-primary font-weight-bold balance"
            style="margin-right: 15px; width: 100px; border-radius: 5px; background-color: #d6954a; border-color: #d6954a;" (click)="navigateToPortfolio()">
              ${{ Balance }}
            </button>
            <button class="btn btn-primary font-weight-bold rounded-circle" style="margin-right: 15px; border-radius: 5px; background-color: #d6954a; border-color: #d6954a;" (click)="navigateToOptions()">O</button>
          </div>
         </div>
         <div class="" style="background-color: white; max-width: 300px; max-height: 105px; border-radius: 10px;">
          <div class="kyc-popup" style="margin-left: 15px;" *ngIf="!isKycCompleted">
            <div class="kyc-popup-content" style="margin-top: 25px;">
              <h4>KYC is not completed</h4>
              <button class="btn btn-primary" style="margin-bottom: 45px;" (click)="navigateToKyc()">Complete KYC</button>
            </div>
          </div>
        </div>
        <div class="panel border bg-white">
          <div class="panel-heading">
            <h3 class="pt-3 font-weight-bold">{{ symbol }} Stock</h3>
          </div>
          <div class="body p-3" style="align-items: center;">
            <img class="stock-img" style="width: 100%;
            height: 450px;
            min-width: 200px;
            position: relative;
            align-items: center;" src="https://evancarthey.com/wp-content/uploads/2021/07/TradingView-chart-setup-2048x906.png" alt="Stock Graph" />
            <div class="form-group pt-3">
              <div class="bg-white">
                <h4>Latest Price: ${{ latestPrice }}</h4>
                <button
                  class="btn btn-primary btn-block mt-4 w-100 font-weight-bold"
                  (click)="showForm = !showForm"
                  class="btn"
                  [disabled]="marketStatus === 'Closed' || isKycCompleted === 'False'"
                >
                  Buy at ${{ latestPrice }}
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="showForm" class="overlay">
      <button *ngIf="showForm"
        class="btn btn-primary btn-block mt-4 w-100 font-weight-bold"
        (click)="showForm = !showForm"
        class="btn" style="margin-left:20px"> X </button>
      <div *ngIf="showForm" class="form-container">
        <div class="final-buy upper">
          <label for="symbol" id="bsymbol">Stock: {{ symbol }}</label>
          <div>
            <label for="price">Buying at ${{ latestPrice }}</label>
          </div>
        </div>
        <div class="final-buy lower">
          <div>
            <input [(ngModel)]="Quantity" type="text" placeholder="  Quantity">
          </div>
          <button
            class="btn btn-primary btn-block mt-4 w-100 font-weight-bold finalBuy"
            (click)="buyStock()"
            class="btn" style="margin-left: 80px;"
          >
            Buy Stock
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
